<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog | WSRicardo</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header class="site-header">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="imgs/wan-vectorArt1-thumbnail.jpg" alt="Logo WSRicardo" class="logo-avatar">
                <span>WSRicardo</span>
            </a>
            <nav class="main-nav">
                <a href="index.html">Home</a>
                <a href="projetos.html">Projetos</a>
                <a href="blog.html" class="active">Blog</a>
                <a href="galeria.html">Galeria</a>
                <a href="cartum.html">Cartum</a>
                <a href="#contato">Contato</a>
            </nav>
        </div>
    </header>

    <main>
        <section class="section">
            <div class="container">
                <header class="page-header">
                    <h1>Blog</h1>
                    <p>Artigos, anotações e reflexões sobre os temas que estudo. Para uma lista sempre atualizada, o ideal é integrar esta página ao sistema de templates do Pelican.</p>
                </header>

                <div class="article-list">
                    <!-- As postagens serão carregadas aqui via JavaScript -->
                    <p class="loading-message">Carregando postagens...</p>
                </div>

                <!-- Link para a página principal do blog gerada pelo Pelican -->
                <div class="section-cta">
                    <a href="blog/index.html" class="btn">Explorar Blog</a>
                </div>
            </div>
        </section>
    </main>

    <footer id="contato" class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <h3>WSRicardo</h3>
                    <p>Um espaço pessoal para anotações, reflexões e experimentos. Feito com código, curiosidade e um café.</p>
                </div>
                <div class="footer-contact">
                    <h3>Conecte-se</h3>
                    <div class="social-links">
                        <a href="https://github.com/wsricardo" target="_blank" rel="noopener noreferrer">GitHub</a>
                        <a href="https://linkedin.com/in/wandeson-ricardo" target="_blank" rel="noopener noreferrer">LinkedIn</a>
                        <a href="#">YouTube</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Wandeson Ricardo. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

<script>
    const FEED_URL = 'blog/feeds/all.atom.xml';

    async function loadBlogPosts() {
        const container = document.querySelector('.article-list');
        try {
            const res = await fetch(FEED_URL);
            console.log( '>', res);
            console.log( '>', res.ok);
            console.log( '>', res.statusText);
            if (!res.ok) {
                throw new Error(`Erro ao buscar feed: ${res.statusText}`);
            }
            const xml = await res.text();
            const doc = new DOMParser().parseFromString(xml, 'application/xml');

            container.innerHTML = ''; // Limpa a mensagem de "carregando"

            const items = doc.querySelectorAll('item, entry');

            if (items.length === 0) {
                container.innerHTML = '<p>Nenhuma postagem encontrada. O feed pode estar vazio ou a URL incorreta.</p>';
                return;
            }

            items.forEach(item => {
                const title = item.querySelector('title')?.textContent || 'Sem título';
                const link = item.querySelector('link')?.getAttribute('href') || '#';
                const author = item.querySelector('author > name')?.textContent || 'Autor desconhecido';
                const summaryNode = item.querySelector('summary, description');
                const summary = summaryNode ? (new DOMParser().parseFromString(summaryNode.textContent, 'text/html').body.textContent || '').substring(0, 280) + '...' : '';
                const date = item.querySelector('published, pubDate')?.textContent;

                const article = document.createElement('article');
                article.className = 'article-summary';

                let articleMeta = '';
                if (date) {
                    const pubDate = new Date(date);
                    const formattedDate = pubDate.toLocaleDateString('pt-BR', { day: 'numeric', month: 'long', year: 'numeric' });
                    articleMeta += `<span>Publicado em <time datetime="${pubDate.toISOString()}">${formattedDate}</time></span>`;
                }
                articleMeta += `<span>por ${author}</span>`;

                article.innerHTML = `
                    <header>
                        <h2 class="article-title"><a href="${link}" rel="bookmark">${title}</a></h2>
                        <div class="article-meta">${articleMeta}</div>
                    </header>
                    <div class="article-content"><p>${summary}</p></div>
                    <footer class="article-footer"><a href="${link}">Leia mais &rarr;</a></footer>
                `;
                container.appendChild(article);
            });

        } catch (e) {
            container.innerHTML = '<p>Não foi possível carregar as postagens. Verifique a URL do feed ou a configuração do servidor.</p>';
            console.warn('Falha ao carregar o feed do blog:', e);
        }
    }

    document.addEventListener('DOMContentLoaded', loadBlogPosts);
</script>

</body>
</html>
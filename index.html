<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WSRicardo</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

    <header class="site-header">
        <div class="container">
            <a href="index.html" class="logo">
                <img src="imgs/wan-vectorArt1-thumbnail.jpg" alt="Logo WSRicardo" class="logo-avatar">
                <span>WSRicardo</span>
            </a>
            <nav class="main-nav">
                <a href="index.html">Home</a>
                <a href="projetos.html">Projetos</a>
                <a href="blog.html">Blog</a>
                <a href="galeria.html">Galeria</a>
                <a href="cartum.html">Cartum</a>
                <a href="#contato">Contato</a>
            </nav>
        </div>
    </header>

    <main>
        <section id="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Um Portal de Ideias, Experimentos, Conhecimentos e Informação</h1>
                    <p>Explorando a interseção entre matemática, tecnologia, arte e agricultura. Um espaço para compartilhar projetos, estudos e reflexões.</p>
                </div>
            </div>
        </section>

        <section id="latest-posts" class="section">
            <div class="container">
                <h2>Últimas do Blog</h2>
                <div id="recent-posts-container" class="posts-grid">
                    <!-- As postagens do blog serão carregadas aqui via JavaScript -->
                    <p class="loading-message">Carregando postagens recentes...</p>
                </div>
                <div class="section-cta">
                    <a href="blog.html" class="btn">Visitar o Blog</a>
                </div>
            </div>
        </section>

        <section id="youtube-channel" class="section bg-light">
            <div class="container">
                <h2>Canal no YouTube</h2>
                <div class="youtube-content">
                    <p>Vídeos sobre programação, matemática e outros tópicos que exploram a criatividade e o aprendizado. Inscreva-se para acompanhar os novos conteúdos.</p>
                    <!-- Placeholder para vídeo do YouTube -->
                    <div class="video-placeholder">
                        <p>Futuro vídeo do YouTube aqui.</p>
                    </div>
                    <div class="section-cta">
                        <a href="#" class="btn btn-secondary" target="_blank" rel="noopener noreferrer">Acessar o Canal</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="projects" class="section">
            <div class="container">
                <h2>Projetos em Destaque</h2>
                <div class="project-grid">
                    <div class="project-card">
                        <h3>Análise de Dados Populacionais</h3>
                        <p>Estudo sobre crescimento populacional utilizando Python, Pandas e Scipy para realizar uma análise de regressão linear.</p>
                        <a href="blog/meustrabalhos/Projeto-Prog1/analise_linear.html" class="project-link">Ver Detalhes</a>
                    </div>
                    <div class="project-card">
                        <h3>Gerador de Site Estático</h3>
                        <p>Este site pessoal, construído com o gerador de sites estáticos Pelican e um tema customizado, focado em performance e simplicidade.</p>
                        <a href="https://github.com/wsricardo/wsricardo.github.io" class="project-link">Ver no GitHub</a>
                    </div>
                    <div class="project-card">
                        <h3>Exercícios de Cálculo em LaTeX</h3>
                        <p>Uma coleção de listas de exercícios de Cálculo I, formatadas profissionalmente com LaTeX, cobrindo limites, derivadas e integrais.</p>
                        <a href="blog/arquivos/calculo/lista1/main.pdf" class="project-link">Visualizar PDF</a>
                    </div>
                </div>
                 <div class="section-cta">
                    <a href="projetos.html" class="btn">Ver todos os projetos</a>
                </div>
            </div>
        </section>

        <section id="gallery-preview" class="section bg-light">
            <div class="container">
                <h2>Galeria de Arte</h2>
                <div class="gallery-grid">
                    <div class="gallery-item">
                        <img src="blog/imagens/pen-draw.jpg" alt="Desenho à caneta">
                    </div>
                    <div class="gallery-item">
                        <img src="imgs/wan-vectorArt1-thumbnail.jpg" alt="Arte vetorial">
                    </div>
                    <div class="gallery-item">
                        <img src="blog/imagens/mona-lisa.webp" alt="Pintura Mona Lisa de Da Vinci">
                    </div>
                </div>
                <div class="section-cta">
                    <a href="galeria.html" class="btn">Explorar a Galeria</a>
                </div>
            </div>
        </section>

        <section id="latest-cartoons" class="section">
            <div class="container">
                <h2>Cartuns Recentes</h2>
                <div id="recent-cartoons-container" class="gallery-grid">
                    <!-- Os cartuns serão carregados aqui via JavaScript -->
                    <p class="loading-message">Carregando cartuns recentes...</p>
                </div>
                <div class="section-cta">
                    <a href="cartum.html" class="btn">Ver todos os cartuns</a>
                </div>
            </div>
        </section>

    </main>

    <footer id="contato" class="site-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <h3>WSRicardo</h3>
                    <p>Um espaço pessoal para anotações, reflexões e experimentos. Feito com código, curiosidade e um café.</p>
                </div>
                <div class="footer-contact">
                    <h3>Conecte-se</h3>
                    <div class="social-links">
                        <a href="https://github.com/wsricardo" target="_blank" rel="noopener noreferrer">GitHub</a>
                        <a href="https://linkedin.com/in/wandeson-ricardo" target="_blank" rel="noopener noreferrer">LinkedIn</a>
                        <!-- Adicionar link para o YouTube quando disponível -->
                        <a href="#">YouTube</a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Wandeson Ricardo. Gerado com <a href="https://getpelican.com/" target="_blank" rel="noopener">Pelican</a>. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

<script>
  // O feed RSS/Atom é gerado pelo Pelican. A URL pode precisar de ajuste
  // dependendo da configuração final do 'pelicanconf.py' (FEED_ALL_ATOM/RSS).
  const BLOG_FEED_URL = 'blog/feeds/all.atom.xml';
  const CARTOON_FEED_URL = 'blog/feeds/cartum.atom.xml'; // Assumindo que 'cartum' é o slug da categoria
  const MAX_ITEMS = 3;

  async function loadFeed() {
    const container = document.querySelector('#recent-posts-container');
    try {
      const res = await fetch(BLOG_FEED_URL);
      if (!res.ok) {
        throw new Error(`Erro ao buscar feed: ${res.statusText}`);
      }
      const xml = await res.text();
      const doc = new DOMParser().parseFromString(xml, 'application/xml');
      
      // Limpa a mensagem de "carregando"
      container.innerHTML = '';

      const items = doc.querySelectorAll('item, entry');
      let count = 0;

      if (items.length === 0) {
        container.innerHTML = '<p>Nenhuma postagem recente encontrada. O feed pode estar vazio ou a URL incorreta.</p>';
        return;
      }

      items.forEach(item => {
        if (count >= MAX_ITEMS) return;

        const title = item.querySelector('title')?.textContent || 'Sem título';
        const link = item.querySelector('link')?.getAttribute('href') || item.querySelector('link')?.textContent || '#';
        const summaryNode = item.querySelector('summary, description');
        // Tenta extrair o texto puro do resumo, removendo tags HTML
        const summary = summaryNode ? (new DOMParser().parseFromString(summaryNode.textContent, 'text/html').body.textContent || '').substring(0, 150) + '...' : '';
        const date = item.querySelector('published, pubDate')?.textContent;

        const postCard = document.createElement('article');
        postCard.className = 'post-card';

        let postDate = '';
        if (date) {
            postDate = `<time datetime="${new Date(date).toISOString()}">${new Date(date).toLocaleDateString('pt-BR', { day: 'numeric', month: 'long', year: 'numeric' })}</time>`;
        }

        postCard.innerHTML = `
            <div class="post-card-content">
                <h3><a href="${link}">${title}</a></h3>
                <p>${summary}</p>
                ${postDate}
            </div>
        `;
        container.appendChild(postCard);
        count++;
      });

    } catch (e) {
      container.innerHTML = '<p>Não foi possível carregar as postagens do blog. Verifique a URL do feed ou a configuração do servidor.</p>';
      console.warn('Falha ao carregar o feed do blog:', e);
    }
  }

  async function loadCartoonFeed() {
    const container = document.querySelector('#recent-cartoons-container');
    try {
        const res = await fetch(CARTOON_FEED_URL);
        if (!res.ok) {
            throw new Error(`Erro ao buscar feed de cartuns: ${res.statusText}`);
        }
        const xml = await res.text();
        const doc = new DOMParser().parseFromString(xml, 'application/xml');

        container.innerHTML = ''; // Limpa a mensagem de "carregando"

        const items = doc.querySelectorAll('item, entry');
        let count = 0;

        if (items.length === 0) {
            container.innerHTML = '<p>Nenhum cartum recente encontrado. Verifique a categoria e a geração do feed.</p>';
            return;
        }

        items.forEach(item => {
            if (count >= MAX_ITEMS) return;

            const title = item.querySelector('title')?.textContent || 'Sem título';
            const link = item.querySelector('link')?.getAttribute('href') || '#';
            const contentNode = item.querySelector('content, summary, description');

            if (contentNode) {
                const contentHTML = new DOMParser().parseFromString(contentNode.textContent, 'text/html');
                const img = contentHTML.querySelector('img');

                if (img) {
                    const imgSrc = img.getAttribute('src');
                    const cartoonItem = document.createElement('div');
                    cartoonItem.className = 'gallery-item';
                    // Envolve a imagem em um link para a postagem completa
                    cartoonItem.innerHTML = `<a href="${link}"><img src="${imgSrc}" alt="${title}"></a>`;
                    container.appendChild(cartoonItem);
                    count++;
                }
            }
        });
    } catch (e) {
        container.innerHTML = '<p>Não foi possível carregar os cartuns. Verifique a URL do feed ou a configuração do servidor.</p>';
        console.warn('Falha ao carregar o feed de cartuns:', e);
    }
  }

  // Garante que o DOM está pronto antes de executar o script
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => { loadFeed(); loadCartoonFeed(); });
  } else {
    loadFeed();
    loadCartoonFeed();
  }
</script>

</body>
</html>